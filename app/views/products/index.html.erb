<% provide(:goods, 'active') %>
<% provide(:title, 'Goods') %>

<div class="container">
    <h1>Product</h1>
    <h4>Product in cart: <%= @count %></h4>

    <p><%= link_to 'Add product', new_product_path %></p>

    <% if @products.empty? %>
      <b>No products in store</b>
    <% else %>
      <table border="1">
        <tr>
          <th>good id</th>
          <th>Name</th>
          <th>Price</th>
          <th>Category</th>
          <th></th>
          <th></th>
        </tr>

        <% @products.each do |i| %>

          <tr>
            <td><%= i.id %></td>
            <td><%= link_to i.name, product_path(i) %></td>
            <td><%= i.price %> грн.</td>
            <td><%= i.category.category if i.category %></td>
            <td><%= link_to 'Delete', product_path(i),
                    method: :delete,
                    data: { confirm: 'You sure?' } %></td>
            <td><%= button_to 'Edit', edit_product_path(i),
                    method: :get %></td>
            <td><%= button_to 'Add to cart', carts_path,
                    method: :post, params: { good_name: i.name, id: i.id, price: i.price } %></td>
           </tr>

        <% end %>

      </table>
    <% end %>

    <h3><%= link_to 'back', products_path %></h3>
</div>